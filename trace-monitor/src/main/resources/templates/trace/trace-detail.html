<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>链路监控系统</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!--- css start-->
    <link th:href="@{/static/plugins/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/static/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css}" rel="stylesheet"/>
    <link th:href="@{/static/css/index.css}" rel="stylesheet"/>
    <link th:href="@{/static/css/trace.css}" rel="stylesheet"/>
    <link th:href="@{/static/css/trace-detail.css}" rel="stylesheet"/>

    <!--- js start-->
    <script th:src="@{/static/plugins/jQuery/jQuery-2.1.4.min.js}"></script>
    <script th:src="@{/static/plugins/jQuery/jquery.form.js}"></script>
    <script th:src="@{/static/plugins/bootstrap/js/bootstrap.min.js}"></script>
    <script th:src="@{/static/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js}"></script>
    <script th:src="@{/static/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.zh-CN.js}"></script>

</head>
<body>

<nav class="navbar navbar-inverse" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">链路监控</a>
        </div>
        <ul class="nav navbar-nav navbar-left" id="index-tab-id">
            <li><a id="traceTabId" class="js-click-tab active" data-url="/trace/trace.html" href="javascript:void(0);"><span class="glyphicon glyphicon-retweet"></span> 链路查找</a></li>
            <li><a href="javascript:void(0);" class="js-click-tab" data-url="/dependency/dependency.html"><span class="glyphicon glyphicon-circle-arrow-right"></span> 依赖关系</a></li>
            <li><a href="javascript:void(0);"><span class="glyphicon glyphicon-eye-open"></span> 日志查询</a></li>
        </ul>
    </div>
</nav>

<div id="contentHtml">
    <div class="css-monitor-main-content">

        <ol class="breadcrumb">
            <li><a href="javascript:void(0);">监控系统</a></li>
            <li><a href="javascript:void(0);">链路查找</a></li>
            <li><a href="javascript:void(0);" class = "active">链路详情</a></li>
        </ol>

        <div id='trace-controls' class='panel panel-default'>
            <div class="panel-body">
                <ul class='nav nav-pills'>
                    <li class=''><a href='#'><strong>Trace Id:</strong> <span class='badge' th:text="${data.traceId}"></span></a></li>
                    <li class=''><a href='#'><strong>总耗时:</strong> <span class='badge' th:text="${data.cost} + 'ms'"></span></a></li>
                    <li class=''><a href='#'><strong>服务数:</strong> <span class='badge' th:text="${data.appKeyCount}"></span></a></li>
                    <li class=''><a href='#'><strong>深度:</strong> <span class='badge' th:text="${data.depth}"></span></a></li>
                    <li class=''><a href='#'><strong>Total Spans:</strong> <span class='badge' th:text="${data.totalSpanCount}"></span></a></li>

                    <li class='navbar-right'><a href='javascript:void(0);' id='traceLogsLink'><span class='btn btn-primary btn-xs badge'>Logs</span></a></li>
                    <li class='navbar-right'><a href='javascript:void(0);' id='traceJsonLink'><span class='btn btn-primary btn-xs badge'>JSON</span></a></li>
                </ul>

                <form class='form-inline' role='form'>
                    <div class='btn-group btn-group-sm' id='filterAllServices'>
                        <button type='button' class='btn btn-default active' id='uiExpandAllSpans'>展开链路</button>
                        <button type='button' class='btn btn-default' id='uiCollapseAllSpans'>收起链路</button>
                    </div>
                    <select data-placeholder='查找指定服务' class='form-control input-sm' name='serviceFilterSearch' id='serviceFilterSearch'>
                        <option value=''></option>
                        <option value='123'>123</option>
                    </select>
                </form>

                <div class='trace-details services' th:each="appCountVo : ${data.appKeyCountVos}">
                    <span class='label label-default service-filter-label service-tag-filtered' th:text="${appCountVo.appKey} + ' x ' + ${appCountVo.count}"></span>
                </div>
            </div>
        </div>


        <div class='row' id='trace-container'>
            <div id='timeLabel' class='span'>
                <div class='handle'>名称</div>
                <div class='level-handle'>层级</div>
                <div class='app-key-handle'>appKey</div>
                <div class='ip-handle'>ip</div>
                <div class='type-handle'>类型</div>
                <div class='status-handle'>状态</div>
                <div class="details-handle">详情</div>
                <div class='duration-container' style="margin-left: 730px;" th:each="costStep,stat : ${data.costSteps}">
                    <div class='time-marker' th:classappend="'time-marker-' + ${stat.index}" th:text="${costStep}"></div>
                </div>
            </div>

            <div
                    id="0"
                    class="span service-span depth-0 highlight"
                    data-keys="id,spanName,serviceNames,serviceName,durationStr,duration"
                    data-id="0"
                    data-parent-id=""
                    data-span-name=""
                    data-service-name="com.sankuai.cloud.mssappbj.plusvideo"
                    data-service-names="com.sankuai.cloud.mssappbj.plusvideo"
                    data-duration-str="9600733ms"
                    data-duration="9600733"
                    data-children="0-1,0-2" style="display: block;">

                <div class="handle tooltip-hide" data-toggle="tooltip" data-placement="top" title="" data-original-title="plusvideo">
                    <div class="service-name" style="margin-left: 10px">
                        <span class="expander">+</span>ProductController.test
                    </div>
                </div>
                <div class="level-handle tooltip-hide" data-toggle="tooltip" data-placement="top" title="" data-original-title="0">0</div>
                <div class='app-key-handle'>dubbo-consumer-demo</div>
                <div class="ip-handle">10.73.51.32</div>
                <div class='type-handle'>http</div>
                <div class="status-handle">SUCCESS</div>
                <div class="details-handle" data-toggle="modal" data-target="#myModal0">详情</div>
                <div class="duration-container" style="margin-left: 730px;">
                    <div class="time-marker time-marker-0">.</div>
                    <div class="time-marker time-marker-1">.</div>
                    <div class="time-marker time-marker-2">.</div>
                    <div class="time-marker time-marker-3">.</div>
                    <div class="time-marker time-marker-4">.</div>
                    <div class="time-marker time-marker-5">.</div>

                    <div class="duration" data-toggle="modal" data-target="#myModal0" style="left: 0.0%; width: 94.5%; text-align: center;">
                        <b>2803ms</b>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>